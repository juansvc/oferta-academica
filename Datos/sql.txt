
drop table carreras_instituciones;
drop table instituciones_modalidades;
drop table instituciones;
drop table areas;
drop table niveles;
drop table carreras;
drop table catalogos;

CREATE TABLE areas(
  id SERIAL NOT NULL PRIMARY KEY,
  nombre character varying(250) NOT NULL
);

CREATE TABLE niveles(
  id SERIAL NOT NULL PRIMARY KEY,
  nombre character varying(50) NOT NULL,
  descripcion character varying(150) NOT NULL
);

CREATE TABLE instituciones(
  id SERIAL NOT NULL PRIMARY KEY,
  acronimo character varying(200) NOT NULL,
  nombre character varying(250) NOT NULL,
  tipo character varying(25),
  categoria character(3),
  sitio_web character varying(100),
  n_docentes integer,
  n_docentes_phd integer
);

CREATE TABLE carreras(
  id SERIAL NOT NULL PRIMARY KEY,
  nombre character varying(250),
  id_area integer,
  tipo_formacion character varying(50),
  id_nivel integer,
  CONSTRAINT areas_fkey FOREIGN KEY (id_area)
      REFERENCES areas (id),
  CONSTRAINT niveles_fkey FOREIGN KEY (id_nivel)
      REFERENCES niveles (id)
);

CREATE TABLE matrices(
  id SERIAL NOT NULL PRIMARY KEY,
  id_institucion integer,
  direccion character varying(400),
  telefono character varying(15),
  latitud character varying(20),
  longitud character varying(20),
  id_ciudad integer,
  CONSTRAINT instituciones_fkey FOREIGN KEY (id_institucion)
      REFERENCES instituciones (id),
  CONSTRAINT detalle_catalogos_fkey FOREIGN KEY (id_ciudad)
      REFERENCES detalle_catalogos (id)
);

CREATE TABLE sedes(
  id SERIAL NOT NULL PRIMARY KEY,
  id_institucion integer,
  direccion character varying(400),
  telefono character varying(15),
  latitud character varying(20),
  longitud character varying(20),
  id_ciudad integer,
  CONSTRAINT instituciones_fkey FOREIGN KEY (id_institucion)
      REFERENCES instituciones (id),
  CONSTRAINT detalle_catalogos_fkey FOREIGN KEY (id_ciudad)
      REFERENCES detalle_catalogos (id)
);

CREATE TABLE extensiones(
  id SERIAL NOT NULL PRIMARY KEY,
  id_institucion integer,
  direccion character varying(400),
  telefono character varying(15),
  latitud character varying(20),
  longitud character varying(20),
  id_ciudad integer,
  CONSTRAINT instituciones_fkey FOREIGN KEY (id_institucion)
      REFERENCES instituciones (id),
  CONSTRAINT detalle_catalogos_fkey FOREIGN KEY (id_ciudad)
      REFERENCES detalle_catalogos (id)
);

CREATE TABLE carreras_instituciones(
  id SERIAL NOT NULL PRIMARY KEY,
  id_carrera integer,
  id_institucion integer,
  CONSTRAINT carreras_fkey FOREIGN KEY (id_carrera)
      REFERENCES carreras (id),
  CONSTRAINT instituciones_fkey FOREIGN KEY (id_institucion)
      REFERENCES instituciones (id)
);

CREATE TABLE catalogos(
	id SERIAL NOT NULL PRIMARY KEY,
	nombre character varying(50)
);

CREATE TABLE detalle_catalogos(
	id SERIAL NOT NULL PRIMARY KEY,
	nombre character varying(150) NOT NULL,
	id_catalago integer,
	id_detalle integer,
	CONSTRAINT catalogos_fkey FOREIGN KEY (id_catalago)
		REFERENCES catalogos (id),
	CONSTRAINT detalle_catalogos_fkey FOREIGN KEY (id_detalle)
		REFERENCES detalle_catalogos (id)
);

